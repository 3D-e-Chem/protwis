{% extends "home/base.html" %}
{% load staticfiles %}

{% block addon_css %}
<link href="{% static 'home/css/alignment.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<!-- sequence alignment starts -->
<table>
    <tr>
        <td>
            <!-- static column -->
            <table>
                <tr>
                    <td class="ali-td ali-td-first-col"></td>
                </tr>
                {% for ns in a.numbering_schemes %}
                <tr>
                    <td class="ali-td-generic-num ali-td-first-col">{{ ns.1 }}</td>
                </tr>
                {% endfor %}
                {% for p in a.proteins %}
                <tr>
                    <td class="ali-td ali-td-first-col">
                        <a href='#'>{{ p.name|safe }} [{{ p.species.common_name }}]</a>
                    </td>
                </tr>
                {% endfor %}
            </table>
        </td>
        {% block scores %}{% endblock %}
        <td>
            <!-- scrollable column -->
            <table>

                <!-- segment title line -->
                <tr>
                    {% for s, num in a.segments.items %}
                    <td class="ali-td ali-td-segment-title" colspan="{{ num|length }}">{{ s }}</td>
                    <td class="ali-td">&nbsp;</td>
                    {% endfor %}
                </tr>
                
                <!-- generic number lines -->
                {% for ns, segments in a.generic_numbers.items %}
                <tr>
                    {% for s, num in segments.items %}
                        {% for n, dn in num.items %}
                            <td class="ali-td-generic-num">{{ dn|safe }}</td>
                        {% endfor %}
                        <td class="ali-td">&nbsp;</td>
                    {% endfor %}
                </tr>
                {% endfor %}
                
                <!-- sequence lines -->
                {% for row in a.proteins %}
                <tr>
                    {% for s in row.alignment %}
                        {% for r in s %}
                            <td class="ali-td ali-residue res-color-{{ r.2 }}">
                                {% if r.1 %}
                                <div data-toggle="tooltip" data-placement="top" title="{{ r.3 }}: {{ r.1 }}">{{ r.2 }}</div>
                                {% else %}
                                <div>{{ r.2 }}</div>
                                {% endif %}
                            </td>
                        {% endfor %}
                        <td class="ali-td">&nbsp;</td>
                    {% endfor %}
                </tr>
                {% endfor %}

            </table>

        </td>
    </tr>
</table>
<!-- sequence alignment ends -->
{% endblock %}

{% block addon_js %}
<script type="text/javascript">
$(function () {
    $('[data-toggle="tooltip"]').tooltip()
})
</script>
{% endblock %}